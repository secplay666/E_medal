# 红色检测功能实现说明

## 功能概述
在图像编辑页面添加了**红色检测模式**，用于检测并保留图像中的红色区域，同时对其他区域进行二值化处理。

## 功能特性
- **原图模式**：显示原始图像
- **二值化模式**：将图像完全转换为黑白（支持阈值调整）
- **红色检测模式**（新增）：
  - 自动检测红色区域并保留为纯红色 RGB(255, 0, 0)
  - 其他区域进行二值化处理
  - 支持阈值调整来微调二值化效果

## 实现细节

### 1. 红色检测算法
位置：[ImageProcessor.kt](app/src/main/java/com/example/t4/ImageProcessor.kt)

新增函数：`detectRedAndBinarize(original: Bitmap, threshold: Int): Bitmap`

检测条件：
- 红色分量 (R) > 100
- 绿色分量 (G) < 100  
- 蓝色分量 (B) < 100

可以根据实际需求调整这些阈值来优化检测效果。

### 2. 用户界面更新
- 将"自适应"按钮改为"红色检测"按钮
- 红色检测模式显示阈值滑块，支持实时调整二值化部分的阈值

### 3. 代码变更

#### ImageEditFragment.kt
- 修改 `EditMode` 枚举：`ADAPTIVE_BINARIZE` → `DETECT_RED`
- 新增 `applyDetectRed()` 函数
- 更新红色检测按钮点击处理
- 更新阈值滑块监听器，支持红色检测模式的实时更新

#### ImageProcessor.kt
- 新增 `detectRedAndBinarize()` 函数实现红色检测和二值化

#### fragment_image_edit.xml
- 更新按钮标签文字："自适应" → "红色检测"

## 使用流程
1. 打开图像
2. 确认裁剪（点击"确定裁剪"按钮）
3. 点击"红色检测"按钮
4. 调整阈值滑块（0-255）来微调非红色区域的二值化效果
5. 点击"保存"保存处理结果
6. 点击"下载"发送到设备

## 可调整参数
- **阈值滑块**（0-255）：控制非红色区域的二值化阈值
- **红色检测范围**：可在 `ImageProcessor.detectRedAndBinarize()` 中修改检测条件
  - 当前：R > 100, G < 100, B < 100
  - 可调整为更严格或宽松的条件

## 下一步优化建议
1. 可以添加参数UI，让用户自定义红色检测的阈值范围
2. 可以添加预览，实时显示检测到的红色区域
3. 可以调整红色输出的方式（当前为纯红色 255,0,0）
